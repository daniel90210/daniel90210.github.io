<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #121212;
            overflow: hidden;
        }

        .chess-container {
            display: flex;
            justify-content: center;
            align-items: center;
            max-width: 80vh; /* Ensures it doesn't get too large */
            width: 100%;
        }

        .chessboard {
            display: grid;
            grid-template-columns: repeat(8, min(10vw, 7vh));
            grid-template-rows: repeat(8, min(10vw, 7vh));
            gap: 0;
            box-shadow: 0px 0px 10px rgba(255, 255, 255, 0.1); /* Soft shadow instead of border */
        }

        .square {
            width: min(10vw, 7vh);
            height: min(10vw, 7vh);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            position: relative;
        }

        .white {
            background-color: #FFFED8;
            background-image: radial-gradient(rgba(255,255,255,0.5) 10%, transparent 70%),
                      linear-gradient(45deg, rgba(200, 200, 200, 0.2) 25%, transparent 25%);
            background-blend-mode: overlay;
        }

        .black {
            background-color: #51B02B;
            background-image: radial-gradient(rgba(81, 176, 43, 0.5) 10%, transparent 70%),
                      linear-gradient(45deg, rgba(30, 100, 20, 0.2) 25%, transparent 25%);
            background-blend-mode: overlay;
        }

        .piece {
            width: 90%;
            height: 90%;
            background-size: cover;
            background-position: center;
        }

        .turn-indicator {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 24px;
            color: #FFFED8;
            background-color: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border-radius: 5px;
        }

        .marker {
            width: 20px;
            height: 20px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-image: url('https://img.icons8.com/ios/452/question-mark.png');
            background-size: contain;
            background-repeat: no-repeat;
        }
    </style>
</head>
<body>
    <div class="turn-indicator" id="turn-indicator">White's Turn</div>
    <div class="chess-container">
        <div id="chessboard" class="chessboard"></div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const boardElement = document.getElementById('chessboard');
            let selectedSquare = null; // Track the selected piece
            let turn = 'white'; // Track whose turn it is ('white' or 'black')
            const turnIndicator = document.getElementById('turn-indicator');

            let initialBoard = [
                ['bc', 'bkn', 'bb', 'bq', 'bk', 'bb', 'bkn', 'bc'],
                ['bp', 'bp', 'bp', 'bp', 'bp', 'bp', 'bp', 'bp'],
                ['--', '--', '--', '--', '--', '--', '--', '--'],
                ['--', '--', '--', '--', '--', '--', '--', '--'],
                ['--', '--', '--', '--', '--', '--', '--', '--'],
                ['--', '--', '--', '--', '--', '--', '--', '--'],
                ['wp', 'wp', 'wp', 'wp', 'wp', 'wp', 'wp', 'wp'],
                ['wc', 'wkn', 'wb', 'wq', 'wk', 'wb', 'wkn', 'wc']
            ];

            const pieceImages = {
                'wp': 'pieces/wp.PNG',
                'wkn': 'pieces/wkn.PNG',
                'wb': 'pieces/wb.PNG',
                'wq': 'pieces/wq.PNG',
                'wk': 'pieces/wk.PNG',
                'wc': 'pieces/wc.PNG',
                'bp': 'pieces/bp.PNG',
                'bkn': 'pieces/bkn.PNG',
                'bb': 'pieces/bb.PNG',
                'bq': 'pieces/bq.PNG',
                'bk': 'pieces/bk.PNG',
                'bc': 'pieces/bc.PNG',
                '--': ''
            };

            function createBoard() {
                boardElement.innerHTML = '';
                for (let row = 0; row < 8; row++) {
                    for (let col = 0; col < 8; col++) {
                        const square = document.createElement('div');
                        const piece = initialBoard[row][col];
                        square.classList.add('square');
                        square.classList.add((row + col) % 2 === 0 ? 'white' : 'black');
                        square.dataset.row = row;
                        square.dataset.col = col;

                        // Add piece to square if present
                        if (piece !== '--') {
                            const img = document.createElement('img');
                            img.src = pieceImages[piece];
                            img.alt = piece;
                            img.classList.add('piece');
                            square.appendChild(img);
                        }

                        // Add click event for square
                        square.addEventListener('click', function () {
                            handleSquareClick(square);
                        });

                        boardElement.appendChild(square);
                    }
                }
            }

            function handleSquareClick(square) {
                const row = square.dataset.row;
                const col = square.dataset.col;

                const piece = initialBoard[row][col];
                const isWhiteTurn = turn === 'white';
                const isBlackTurn = turn === 'black';

                // Check if the piece belongs to the player whose turn it is
                if ((isWhiteTurn && piece.startsWith('w')) || (isBlackTurn && piece.startsWith('b'))) {
                    if (selectedSquare === null) {
                        // Select piece if it belongs to the current player
                        selectedSquare = { row, col }; // Store the selected piece
                        square.style.border = '2px solid #FFFBF0'; // Highlight the selected piece
                        showLegalMoves(piece, row, col); // Show possible moves for selected piece
                    } else {
                        // Move piece if it's a valid move
                        const selectedPiece = initialBoard[selectedSquare.row][selectedSquare.col];
                        const legalMove = isLegalMove(selectedPiece, selectedSquare.row, selectedSquare.col, row, col);

                        if (legalMove) {
                            // Valid move, make the move
                            initialBoard[selectedSquare.row][selectedSquare.col] = '--';
                            initialBoard[row][col] = selectedPiece;

                            // Remove border from old square and update the board
                            document.querySelectorAll('.square').forEach(sq => sq.style.border = '');
                            createBoard();

                            // Switch turns after move
                            turn = turn === 'white' ? 'black' : 'white';
                            turnIndicator.textContent = turn === 'white' ? "White's Turn" : "Black's Turn";
                        } else {
                            alert("Illegal move!");
                        }

                        selectedSquare = null; // Deselect piece after move
                        clearMarkers(); // Clear the markers
                    }
                } else {
                    alert(`It's ${turn}'s turn!`);
                    clearMarkers(); // Clear the markers if the wrong player's piece is clicked
                }
            }

            // Function to check if the move is legal for each piece
            function isLegalMove(piece, startRow, startCol, endRow, endCol) {
                // Add your logic for each piece's movement here
                // Example for pawns, knights, etc.
                return true; // Simplified for this example
            }

            // Show legal move markers (question marks) on the board
            function showLegalMoves(piece, row, col) {
                const possibleMoves = getPossibleMoves(piece, row, col);
                possibleMoves.forEach(move => {
                    const square = document.querySelector(`[data-row="${move.row}"][data-col="${move.col}"]`);
                    const marker = document.createElement('div');
                    marker.classList.add('marker');
                    square.appendChild(marker);
                });
            }

            // Get possible moves for a selected piece (dummy example)
            function getPossibleMoves(piece, row, col) {
                let moves = [];
                // Example logic: add simple moves (change with real movement rules)
                if (piece === 'wp') {
                    moves = [{ row: row - 1, col: col }];
                }
                return moves;
            }

            // Clear all legal move markers
            function clearMarkers() {
                const markers = document.querySelectorAll('.marker');
                markers.forEach(marker => marker.remove());
            }

            createBoard(); // Initialize the board
        });
    </script>
</body>
</html>
