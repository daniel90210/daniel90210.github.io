<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess Game</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chessboard-js/1.0.0/chessboard-1.0.0.css"> <!-- Chessboard.js CSS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.13.4/chess.min.js"></script> <!-- Chess.js -->
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #121212;
            overflow: hidden;
        }

        .chess-container {
            display: flex;
            justify-content: center;
            align-items: center;
            max-width: 80vh;
            width: 100%;
        }

        .chessboard {
            display: grid;
            grid-template-columns: repeat(8, min(10vw, 7vh));
            grid-template-rows: repeat(8, min(10vw, 7vh));
            gap: 0;
            box-shadow: 0px 0px 10px rgba(255, 255, 255, 0.1);
        }

        .square {
            width: min(10vw, 7vh);
            height: min(10vw, 7vh);
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .white {
            background-color: #FFFED8;
        }

        .black {
            background-color: #51B02B;
        }

        .piece {
            width: 90%;
            height: 90%;
            background-size: cover;
            background-position: center;
        }
    </style>
</head>
<body>
    <div class="chess-container">
        <div id="chessboard" class="chessboard"></div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const boardElement = document.getElementById('chessboard');

            const initialBoard = [
                ['bc', 'bkn', 'bb', 'bq', 'bk', 'bb', 'bkn', 'bc'],
                ['bp', 'bp', 'bp', 'bp', 'bp', 'bp', 'bp', 'bp'],
                ['--', '--', '--', '--', '--', '--', '--', '--'],
                ['--', '--', '--', '--', '--', '--', '--', '--'],
                ['--', '--', '--', '--', '--', '--', '--', '--'],
                ['--', '--', '--', '--', '--', '--', '--', '--'],
                ['wp', 'wp', 'wp', 'wp', 'wp', 'wp', 'wp', 'wp'],
                ['wc', 'wkn', 'wb', 'wq', 'wk', 'wb', 'wkn', 'wc']
            ];

            const pieceImages = {
                'wp': 'pieces/wp.PNG',
                'wkn': 'pieces/wkn.PNG',
                'wb': 'pieces/wb.PNG',
                'wq': 'pieces/wq.PNG',
                'wk': 'pieces/wk.PNG',
                'wc': 'pieces/wc.PNG',
                'bp': 'pieces/bp.PNG',
                'bkn': 'pieces/bkn.PNG',
                'bb': 'pieces/bb.PNG',
                'bq': 'pieces/bq.PNG',
                'bk': 'pieces/bk.PNG',
                'bc': 'pieces/bc.PNG',
                '--': ''
            };

            // Chessboard.js setup
            const board = Chessboard('chessboard', {
                draggable: true,
                dropOffBoard: 'trash',
                sparePieces: true,
                pieceTheme: function (piece) {
                    return pieceImages[piece] || ''; // Use the custom piece image
                }
            });

            // Initialize Chess.js for game logic
            const game = new Chess();

            // Function for simple AI move (random)
            function makeRandomMove() {
                const moves = game.legalMoves();
                const randomMove = moves[Math.floor(Math.random() * moves.length)];
                game.uci(randomMove);  // Make the move
                board.position(game.fen());  // Update the board
            }

            // Set up the board with the initial position
            board.position(game.fen());

            // Make a move by AI after every human move
            board.on('drop', function (source, target) {
                game.uci(source + target);  // Apply the human move
                makeRandomMove();  // AI move
            });
        });
    </script>
</body>
</html>
