<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #121212;
            overflow: hidden;
        }

        .chess-container {
            display: flex;
            justify-content: center;
            align-items: center;
            max-width: 80vh;
            width: 100%;
        }

        .chessboard {
            display: grid;
            grid-template-columns: repeat(8, min(10vw, 7vh));
            grid-template-rows: repeat(8, min(10vw, 7vh));
            gap: 0;
            box-shadow: 0px 0px 10px rgba(255, 255, 255, 0.1);
        }

        .square {
            width: min(10vw, 7vh);
            height: min(10vw, 7vh);
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            border: 1px solid #ccc;
        }

        .white {
            background-color: #FFFED8;
        }

        .black {
            background-color: #51B02B;
        }

        .piece {
            width: 80%;
            height: 80%;
            background-size: cover;
            background-position: center;
        }

        .marker {
            width: 20%;
            height: 20%;
            background-color: rgba(255, 255, 255, 0.5);
            border-radius: 50%;
        }
    </style>
</head>
<body>
    <div class="chess-container">
        <div id="chessboard" class="chessboard"></div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const boardElement = document.getElementById('chessboard');
            const initialBoard = [
                ['bc', 'bkn', 'bb', 'bq', 'bk', 'bb', 'bkn', 'bc'],
                ['bp', 'bp', 'bp', 'bp', 'bp', 'bp', 'bp', 'bp'],
                ['--', '--', '--', '--', '--', '--', '--', '--'],
                ['--', '--', '--', '--', '--', '--', '--', '--'],
                ['--', '--', '--', '--', '--', '--', '--', '--'],
                ['--', '--', '--', '--', '--', '--', '--', '--'],
                ['wp', 'wp', 'wp', 'wp', 'wp', 'wp', 'wp', 'wp'],
                ['wc', 'wkn', 'wb', 'wq', 'wk', 'wb', 'wkn', 'wc']
            ];

            const pieceImages = {
                'wp': 'pieces/wp.PNG',
                'wkn': 'pieces/wkn.PNG',
                'wb': 'pieces/wb.PNG',
                'wq': 'pieces/wq.PNG',
                'wk': 'pieces/wk.PNG',
                'wc': 'pieces/wc.PNG',
                'bp': 'pieces/bp.PNG',
                'bkn': 'pieces/bkn.PNG',
                'bb': 'pieces/bb.PNG',
                'bq': 'pieces/bq.PNG',
                'bk': 'pieces/bk.PNG',
                'bc': 'pieces/bc.PNG',
                '--': ''
            };

            let currentTurn = 'white';  // White's turn to start
            let selectedPiece = null;
            let possibleMoves = [];

            function createBoard() {
                boardElement.innerHTML = '';
                for (let row = 0; row < 8; row++) {
                    for (let col = 0; col < 8; col++) {
                        const square = document.createElement('div');
                        const piece = initialBoard[row][col];
                        square.classList.add('square');
                        square.classList.add((row + col) % 2 === 0 ? 'white' : 'black');
                        square.dataset.row = row;
                        square.dataset.col = col;

                        if (piece !== '--') {
                            const img = document.createElement('img');
                            img.src = pieceImages[piece];
                            img.alt = piece;
                            img.classList.add('piece');
                            square.appendChild(img);
                        }

                        square.addEventListener('click', () => onSquareClick(row, col));

                        boardElement.appendChild(square);
                    }
                }
            }

            function onSquareClick(row, col) {
                const piece = initialBoard[row][col];

                if (selectedPiece === null) {
                    if ((currentTurn === 'white' && piece[0] === 'w') || (currentTurn === 'black' && piece[0] === 'b')) {
                        selectedPiece = { row, col, piece };
                        possibleMoves = getPossibleMoves(piece, row, col);
                        highlightLegalMoves(possibleMoves);
                    }
                } else {
                    if (possibleMoves.some(move => move.row === row && move.col === col)) {
                        movePiece(selectedPiece.row, selectedPiece.col, row, col);
                        changeTurn();
                        selectedPiece = null;
                        possibleMoves = [];
                        clearMarkers();
                    } else {
                        selectedPiece = null;
                        possibleMoves = [];
                        clearMarkers();
                    }
                }
            }

            function getPossibleMoves(piece, row, col) {
                const possibleMoves = [];
                const directions = {
                    'wp': [[-1, 0], [-2, 0]], // White pawn moves up
                    'bp': [[1, 0], [2, 0]],   // Black pawn moves down
                    'wkn': [[-2, -1], [-2, 1], [2, -1], [2, 1], [1, -2], [1, 2], [-1, -2], [-1, 2]],  // Knight moves
                    'bb': [[-1, -1], [-1, 1], [1, -1], [1, 1]], // Bishop moves diagonally
                    'wc': [[0, 1], [0, -1], [1, 0], [-1, 0]], // Rook moves vertically and horizontally
                    'wq': [[-1, 0], [1, 0], [0, -1], [0, 1], [-1, -1], [1, 1], [-1, 1], [1, -1]], // Queen moves in all directions
                    'wk': [[-1, 0], [1, 0], [0, -1], [0, 1], [-1, -1], [1, 1], [-1, 1], [1, -1]] // King moves one square
                };

                // Add piece-specific movement here for each piece
                if (piece === 'wp' || piece === 'bp') {
                    const direction = piece === 'wp' ? -1 : 1;
                    if (initialBoard[row + direction] && initialBoard[row + direction][col] === '--') {
                        possibleMoves.push({ row: row + direction, col });
                    }
                }

                return possibleMoves;
            }

            function highlightLegalMoves(moves) {
                moves.forEach(move => {
                    const square = document.querySelector(`.square[data-row="${move.row}"][data-col="${move.col}"]`);
                    const marker = document.createElement('div');
                    marker.classList.add('marker');
                    square.appendChild(marker);
                });
            }

            function clearMarkers() {
                document.querySelectorAll('.marker').forEach(marker => marker.remove());
            }

            function movePiece(fromRow, fromCol, toRow, toCol) {
                const piece = initialBoard[fromRow][fromCol];
                initialBoard[toRow][toCol] = piece;
                initialBoard[fromRow][fromCol] = '--';
                createBoard();  // Redraw the board with the updated state
            }

            function changeTurn() {
                currentTurn = currentTurn === 'white' ? 'black' : 'white';
                console.log(`It's ${currentTurn}'s turn!`);
            }

            createBoard();
        });
    </script>
</body>
</html>
